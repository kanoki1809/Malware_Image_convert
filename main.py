import streamlit as st
import pefile
import PIL.Image

def pe_to_image(file_path):
  pe = pefile.PE(file_path)
  image = PIL.Image.new("RGB", (pe.OPTIONAL_HEADER.SizeOfImage, pe.OPTIONAL_HEADER.SizeOfImage))
  for i in range(pe.OPTIONAL_HEADER.SizeOfImage):
    image.putpixel((i % pe.OPTIONAL_HEADER.SizeOfImage, i // pe.OPTIONAL_HEADER.SizeOfImage), pe.sections[0].get_data()[i])
  return image

st.title("Chuyển đổi file PE thành hình ảnh")

file = st.file_uploader("Chọn file PE")

if file:
  image = pe_to_image(file.name)
  st.image(image)

